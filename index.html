<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Progress Step By Step</title>
    <script src="src/progressprocess.js"></script>
    <style>
        body {
            text-align: center;
        }

        #progress {
            height: 50px;
        }
    </style>
</head>
<body>

<div id="progress">
    <b id="percent"></b>
    <span id="step"></span>
</div>
<button onclick="progressRun(progressExample, 250, null, 'percent', 'step')">Start</button>
<button onclick="progressPause(progressExample)">Pause</button>
<button onclick="progressContinue(progressExample)">Continue</button>

<script>

    var progressExample = new ProgressProcess();

    /**
     *
     * @param process               instance of ProgressProcess
     * @param stepCount             number of steps
     * @param stepCurrent           current step. default = 1
     * @param percentElemID         css element id for current percent
     * @param currentStepElemID     css element id for current step
     */
    function progressRun(process, stepCount, stepCurrent, percentElemID, currentStepElemID) {

        var percentElement = document.getElementById(percentElemID);
        var stepElement = document.getElementById(currentStepElemID);

        stepCurrent = (stepCurrent || 1);
        process.start({
            stepCurrent: stepCurrent,
            stepCount: stepCount,
            callback: function (progress) {

                // fake "ajax" call
                setTimeout(function () {
                    // success and run next step
                    var result = logic(stepCurrent);
                    if (result) {
                        progress.next();
                    }
                }, 500);

            },
            showCallback: function (percent, stepCurrent, stepCount) {
                percentElement.innerHTML = percent + '%';
                stepElement.innerHTML = '( Step ' + stepCurrent + ' of ' + stepCount + ': complete)';
            }
        });
    }

    /**
     *
     * @param process instance of ProgressProcess
     */
    function progressPause(process) {
        process.pause();
    }

    /**
     *
     * @param process instance of ProgressProcess
     */
    function progressContinue(process) {
        process.run();
    }

</script>

<hr>

<script>
    /**
     * fake logic
     * @param stepCurrent
     * @returns {boolean}
     */
    function logic(stepCurrent) {
        return !!stepCurrent;
    }
</script>


</body>
</html>